import { ChangeDetectionStrategy, Component } from '@angular/core';
import { EffectType } from '../../../models/background-effect.model';
import { PanelType } from '../../../models/panel.model';
import * as i0 from "@angular/core";
import * as i1 from "../../../services/panel/panel.service";
import * as i2 from "../../../services/virtual-background/virtual-background.service";
import * as i3 from "@angular/common";
import * as i4 from "@angular/material/button";
import * as i5 from "@angular/material/icon";
import * as i6 from "@angular/material/tooltip";
import * as i7 from "@angular/flex-layout/flex";
import * as i8 from "../../../pipes/translate.pipe";
/**
 * @internal
 */
export class BackgroundEffectsPanelComponent {
    /**
     * @internal
     * @param panelService
     * @param backgroundService
     * @param cd
     */
    constructor(panelService, backgroundService, cd) {
        this.panelService = panelService;
        this.backgroundService = backgroundService;
        this.cd = cd;
        this.effectType = EffectType;
        this.backgroundImages = [];
        this.noEffectAndBlurredBackground = [];
    }
    ngOnInit() {
        this.subscribeToBackgroundSelected();
        this.backgrounds = this.backgroundService.getBackgrounds();
        this.noEffectAndBlurredBackground = this.backgrounds.filter(f => f.type === EffectType.BLUR || f.type === EffectType.NONE);
        this.backgroundImages = this.backgrounds.filter(f => f.type === EffectType.IMAGE);
    }
    ngOnDestroy() {
        if (this.backgroundSubs)
            this.backgroundSubs.unsubscribe();
    }
    subscribeToBackgroundSelected() {
        this.backgroundSubs = this.backgroundService.backgroundSelectedObs.subscribe((id) => {
            this.backgroundSelectedId = id;
            this.cd.markForCheck();
        });
    }
    close() {
        this.panelService.togglePanel(PanelType.BACKGROUND_EFFECTS);
    }
    async applyBackground(effect) {
        if (effect.type === EffectType.NONE) {
            await this.removeBackground();
        }
        else {
            await this.backgroundService.applyBackground(effect);
        }
    }
    async removeBackground() {
        await this.backgroundService.removeBackground();
    }
}
BackgroundEffectsPanelComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.8", ngImport: i0, type: BackgroundEffectsPanelComponent, deps: [{ token: i1.PanelService }, { token: i2.VirtualBackgroundService }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
BackgroundEffectsPanelComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.8", type: BackgroundEffectsPanelComponent, selector: "ov-background-effects-panel", ngImport: i0, template: "<div class=\"panel-container\" id=\"background-effects-container\" fxLayout=\"column\" fxLayoutAlign=\"space-evenly none\">\n\t<div class=\"panel-header-container\" fxFlex=\"55px\" fxLayoutAlign=\"start center\">\n\t\t<h3 class=\"panel-title\">{{ 'PANEL.BACKGROUND.TITLE' | translate }}</h3>\n\t\t<button class=\"panel-close-button\" mat-icon-button matTooltip=\"{{ 'PANEL.CLOSE' | translate }}\" (click)=\"close()\">\n\t\t\t<mat-icon>close</mat-icon>\n\t\t</button>\n\t</div>\n\n\t<div class=\"effects-container\" fxFlex=\"100%\" fxLayoutAlign=\"space-evenly none\">\n\t\t<div>\n\t\t\t<h4>{{ 'PANEL.BACKGROUND.BLURRED_SECTION' | translate }}</h4>\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\t*ngFor=\"let effect of noEffectAndBlurredBackground\"\n\t\t\t\t\tmat-icon-button\n\t\t\t\t\tclass=\"effect-button\"\n\t\t\t\t\t[class.active-effect-btn]=\"backgroundSelectedId === effect.id\"\n\t\t\t\t\t(click)=\"applyBackground(effect)\"\n\t\t\t\t>\n\t\t\t\t\t<mat-icon\n\t\t\t\t\t\t[matTooltip]=\"\n\t\t\t\t\t\t\teffect.type === effectType.NONE\n\t\t\t\t\t\t\t\t? ('PANEL.BACKGROUND.NO_EFFECTS' | translate)\n\t\t\t\t\t\t\t\t: ('PANEL.BACKGROUND.BLURRED_EFFECT' | translate)\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t>{{ effect.thumbnail }}</mat-icon\n\t\t\t\t\t>\n\t\t\t\t</button>\n\t\t\t\t<!-- <button\n\t\t\t\t\tmat-icon-button\n\t\t\t\t\tclass=\"effect-button\"\n\t\t\t\t\tid=\"hard-blur-btn\"\n\t\t\t\t\t[class.active-effect-btn]=\"backgroundSelectedId === 'hard_blur'\"\n\t\t\t\t\t(click)=\"applyBackground('hard_blur')\"\n\t\t\t\t>\n\t\t\t\t\t<mat-icon matTooltip=\"Hard blur effect\">blur_on</mat-icon>\n\t\t\t\t</button> -->\n\t\t\t</div>\n\t\t</div>\n\t\t<hr />\n\t\t<div>\n\t\t\t<h4>{{ 'PANEL.BACKGROUND.IMAGES_SECTION' | translate }}</h4>\n\n\t\t\t<div class=\"grid\">\n\t\t\t\t<div\n\t\t\t\t\t*ngFor=\"let effect of backgroundImages\"\n\t\t\t\t\tclass=\"effect-button\"\n\t\t\t\t\t[class.active-effect-btn]=\"backgroundSelectedId === effect.id\"\n\t\t\t\t\t(click)=\"applyBackground(effect)\"\n\t\t\t\t>\n\t\t\t\t\t<img [src]=\"effect.thumbnail\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n", styles: [".panel-container{margin:20px;background-color:var(--ov-panel-background);border-radius:var(--ov-panel-radius);max-height:calc(100% - 40px);min-height:calc(100% - 40px)}.panel-header-container{padding:10px;display:flex}.panel-title{margin-left:5px;margin-top:auto;margin-bottom:auto}.panel-close-button{margin-left:auto;border-radius:var(--ov-buttons-radius)}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-thumb{background:#a7a7a7;border-radius:4px}::-webkit-scrollbar-thumb:hover{background:#7c7c7c}::-webkit-scrollbar-track{background:var(--ov-light-color);border-radius:4px}\n", ".effects-container{display:block!important;overflow-y:auto;overflow-x:hidden;padding:10px}.effect-button{margin:5px;border-radius:var(--ov-panel-radius);background-color:var(--ov-light-color);width:60px;height:60px}.effect-button:hover{cursor:pointer}.active-effect-btn{border:2px solid var(--ov-tertiary-color)}#hard-blur-btn .mat-icon{font-weight:700!important}.grid{display:grid;grid-template-columns:repeat(auto-fit,70px)}.grid img{max-width:100%;max-height:100%;border-radius:var(--ov-panel-radius)}::ng-deep .mat-slider-thumb{visibility:hidden}::ng-deep .mat-slider-vertical .mat-slider-track-fill,::ng-deep .mat-slider-vertical .mat-slider-track-background,::ng-deep .mat-slider-vertical .mat-slider-track-wrapper{width:10px!important}\n"], dependencies: [{ kind: "directive", type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "component", type: i4.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { kind: "component", type: i5.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "directive", type: i6.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { kind: "directive", type: i7.DefaultLayoutDirective, selector: "  [fxLayout], [fxLayout.xs], [fxLayout.sm], [fxLayout.md],  [fxLayout.lg], [fxLayout.xl], [fxLayout.lt-sm], [fxLayout.lt-md],  [fxLayout.lt-lg], [fxLayout.lt-xl], [fxLayout.gt-xs], [fxLayout.gt-sm],  [fxLayout.gt-md], [fxLayout.gt-lg]", inputs: ["fxLayout", "fxLayout.xs", "fxLayout.sm", "fxLayout.md", "fxLayout.lg", "fxLayout.xl", "fxLayout.lt-sm", "fxLayout.lt-md", "fxLayout.lt-lg", "fxLayout.lt-xl", "fxLayout.gt-xs", "fxLayout.gt-sm", "fxLayout.gt-md", "fxLayout.gt-lg"] }, { kind: "directive", type: i7.DefaultLayoutAlignDirective, selector: "  [fxLayoutAlign], [fxLayoutAlign.xs], [fxLayoutAlign.sm], [fxLayoutAlign.md],  [fxLayoutAlign.lg], [fxLayoutAlign.xl], [fxLayoutAlign.lt-sm], [fxLayoutAlign.lt-md],  [fxLayoutAlign.lt-lg], [fxLayoutAlign.lt-xl], [fxLayoutAlign.gt-xs], [fxLayoutAlign.gt-sm],  [fxLayoutAlign.gt-md], [fxLayoutAlign.gt-lg]", inputs: ["fxLayoutAlign", "fxLayoutAlign.xs", "fxLayoutAlign.sm", "fxLayoutAlign.md", "fxLayoutAlign.lg", "fxLayoutAlign.xl", "fxLayoutAlign.lt-sm", "fxLayoutAlign.lt-md", "fxLayoutAlign.lt-lg", "fxLayoutAlign.lt-xl", "fxLayoutAlign.gt-xs", "fxLayoutAlign.gt-sm", "fxLayoutAlign.gt-md", "fxLayoutAlign.gt-lg"] }, { kind: "directive", type: i7.DefaultFlexDirective, selector: "  [fxFlex], [fxFlex.xs], [fxFlex.sm], [fxFlex.md],  [fxFlex.lg], [fxFlex.xl], [fxFlex.lt-sm], [fxFlex.lt-md],  [fxFlex.lt-lg], [fxFlex.lt-xl], [fxFlex.gt-xs], [fxFlex.gt-sm],  [fxFlex.gt-md], [fxFlex.gt-lg]", inputs: ["fxFlex", "fxFlex.xs", "fxFlex.sm", "fxFlex.md", "fxFlex.lg", "fxFlex.xl", "fxFlex.lt-sm", "fxFlex.lt-md", "fxFlex.lt-lg", "fxFlex.lt-xl", "fxFlex.gt-xs", "fxFlex.gt-sm", "fxFlex.gt-md", "fxFlex.gt-lg"] }, { kind: "pipe", type: i8.TranslatePipe, name: "translate" }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.8", ngImport: i0, type: BackgroundEffectsPanelComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ov-background-effects-panel', changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"panel-container\" id=\"background-effects-container\" fxLayout=\"column\" fxLayoutAlign=\"space-evenly none\">\n\t<div class=\"panel-header-container\" fxFlex=\"55px\" fxLayoutAlign=\"start center\">\n\t\t<h3 class=\"panel-title\">{{ 'PANEL.BACKGROUND.TITLE' | translate }}</h3>\n\t\t<button class=\"panel-close-button\" mat-icon-button matTooltip=\"{{ 'PANEL.CLOSE' | translate }}\" (click)=\"close()\">\n\t\t\t<mat-icon>close</mat-icon>\n\t\t</button>\n\t</div>\n\n\t<div class=\"effects-container\" fxFlex=\"100%\" fxLayoutAlign=\"space-evenly none\">\n\t\t<div>\n\t\t\t<h4>{{ 'PANEL.BACKGROUND.BLURRED_SECTION' | translate }}</h4>\n\t\t\t<div>\n\t\t\t\t<button\n\t\t\t\t\t*ngFor=\"let effect of noEffectAndBlurredBackground\"\n\t\t\t\t\tmat-icon-button\n\t\t\t\t\tclass=\"effect-button\"\n\t\t\t\t\t[class.active-effect-btn]=\"backgroundSelectedId === effect.id\"\n\t\t\t\t\t(click)=\"applyBackground(effect)\"\n\t\t\t\t>\n\t\t\t\t\t<mat-icon\n\t\t\t\t\t\t[matTooltip]=\"\n\t\t\t\t\t\t\teffect.type === effectType.NONE\n\t\t\t\t\t\t\t\t? ('PANEL.BACKGROUND.NO_EFFECTS' | translate)\n\t\t\t\t\t\t\t\t: ('PANEL.BACKGROUND.BLURRED_EFFECT' | translate)\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t>{{ effect.thumbnail }}</mat-icon\n\t\t\t\t\t>\n\t\t\t\t</button>\n\t\t\t\t<!-- <button\n\t\t\t\t\tmat-icon-button\n\t\t\t\t\tclass=\"effect-button\"\n\t\t\t\t\tid=\"hard-blur-btn\"\n\t\t\t\t\t[class.active-effect-btn]=\"backgroundSelectedId === 'hard_blur'\"\n\t\t\t\t\t(click)=\"applyBackground('hard_blur')\"\n\t\t\t\t>\n\t\t\t\t\t<mat-icon matTooltip=\"Hard blur effect\">blur_on</mat-icon>\n\t\t\t\t</button> -->\n\t\t\t</div>\n\t\t</div>\n\t\t<hr />\n\t\t<div>\n\t\t\t<h4>{{ 'PANEL.BACKGROUND.IMAGES_SECTION' | translate }}</h4>\n\n\t\t\t<div class=\"grid\">\n\t\t\t\t<div\n\t\t\t\t\t*ngFor=\"let effect of backgroundImages\"\n\t\t\t\t\tclass=\"effect-button\"\n\t\t\t\t\t[class.active-effect-btn]=\"backgroundSelectedId === effect.id\"\n\t\t\t\t\t(click)=\"applyBackground(effect)\"\n\t\t\t\t>\n\t\t\t\t\t<img [src]=\"effect.thumbnail\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n", styles: [".panel-container{margin:20px;background-color:var(--ov-panel-background);border-radius:var(--ov-panel-radius);max-height:calc(100% - 40px);min-height:calc(100% - 40px)}.panel-header-container{padding:10px;display:flex}.panel-title{margin-left:5px;margin-top:auto;margin-bottom:auto}.panel-close-button{margin-left:auto;border-radius:var(--ov-buttons-radius)}::-webkit-scrollbar{width:8px}::-webkit-scrollbar-thumb{background:#a7a7a7;border-radius:4px}::-webkit-scrollbar-thumb:hover{background:#7c7c7c}::-webkit-scrollbar-track{background:var(--ov-light-color);border-radius:4px}\n", ".effects-container{display:block!important;overflow-y:auto;overflow-x:hidden;padding:10px}.effect-button{margin:5px;border-radius:var(--ov-panel-radius);background-color:var(--ov-light-color);width:60px;height:60px}.effect-button:hover{cursor:pointer}.active-effect-btn{border:2px solid var(--ov-tertiary-color)}#hard-blur-btn .mat-icon{font-weight:700!important}.grid{display:grid;grid-template-columns:repeat(auto-fit,70px)}.grid img{max-width:100%;max-height:100%;border-radius:var(--ov-panel-radius)}::ng-deep .mat-slider-thumb{visibility:hidden}::ng-deep .mat-slider-vertical .mat-slider-track-fill,::ng-deep .mat-slider-vertical .mat-slider-track-background,::ng-deep .mat-slider-vertical .mat-slider-track-wrapper{width:10px!important}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.PanelService }, { type: i2.VirtualBackgroundService }, { type: i0.ChangeDetectorRef }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2dyb3VuZC1lZmZlY3RzLXBhbmVsLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL29wZW52aWR1LWFuZ3VsYXIvc3JjL2xpYi9jb21wb25lbnRzL3BhbmVsL2JhY2tncm91bmQtZWZmZWN0cy1wYW5lbC9iYWNrZ3JvdW5kLWVmZmVjdHMtcGFuZWwuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvb3BlbnZpZHUtYW5ndWxhci9zcmMvbGliL2NvbXBvbmVudHMvcGFuZWwvYmFja2dyb3VuZC1lZmZlY3RzLXBhbmVsL2JhY2tncm91bmQtZWZmZWN0cy1wYW5lbC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsdUJBQXVCLEVBQXFCLFNBQVMsRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUU5RixPQUFPLEVBQW9CLFVBQVUsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBQ3ZGLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQzs7Ozs7Ozs7OztBQUl4RDs7R0FFRztBQU9ILE1BQU0sT0FBTywrQkFBK0I7SUFTMUM7Ozs7O09BS0c7SUFDSCxZQUFvQixZQUEwQixFQUFVLGlCQUEyQyxFQUFVLEVBQXFCO1FBQTlHLGlCQUFZLEdBQVosWUFBWSxDQUFjO1FBQVUsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUEwQjtRQUFVLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBWmxJLGVBQVUsR0FBRyxVQUFVLENBQUM7UUFDeEIscUJBQWdCLEdBQXVCLEVBQUUsQ0FBQztRQUMxQyxpQ0FBNEIsR0FBdUIsRUFBRSxDQUFDO0lBVWdGLENBQUM7SUFFdkksUUFBUTtRQUNOLElBQUksQ0FBQyw2QkFBNkIsRUFBRSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDLGNBQWMsRUFBRSxDQUFDO1FBQzNELElBQUksQ0FBQyw0QkFBNEIsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEtBQUssVUFBVSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUMsSUFBSSxLQUFLLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzSCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxLQUFLLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNwRixDQUFDO0lBRUQsV0FBVztRQUNULElBQUksSUFBSSxDQUFDLGNBQWM7WUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzdELENBQUM7SUFDRCw2QkFBNkI7UUFDM0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsaUJBQWlCLENBQUMscUJBQXFCLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUU7WUFDbEYsSUFBSSxDQUFDLG9CQUFvQixHQUFHLEVBQUUsQ0FBQztZQUMvQixJQUFJLENBQUMsRUFBRSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3pCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELEtBQUs7UUFDSCxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUM5RCxDQUFDO0lBRUQsS0FBSyxDQUFDLGVBQWUsQ0FBQyxNQUF3QjtRQUM1QyxJQUFJLE1BQU0sQ0FBQyxJQUFJLEtBQUssVUFBVSxDQUFDLElBQUksRUFBRTtZQUNuQyxNQUFNLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1NBQy9CO2FBQU07WUFDTCxNQUFNLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDdEQ7SUFDSCxDQUFDO0lBRUQsS0FBSyxDQUFDLGdCQUFnQjtRQUNwQixNQUFNLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQ2xELENBQUM7OzRIQWhEVSwrQkFBK0I7Z0hBQS9CLCtCQUErQixtRUNoQjVDLHlqRUF3REE7MkZEeENhLCtCQUErQjtrQkFOM0MsU0FBUzsrQkFDRSw2QkFBNkIsbUJBR3RCLHVCQUF1QixDQUFDLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEJhY2tncm91bmRFZmZlY3QsIEVmZmVjdFR5cGUgfSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvYmFja2dyb3VuZC1lZmZlY3QubW9kZWwnO1xuaW1wb3J0IHsgUGFuZWxUeXBlIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3BhbmVsLm1vZGVsJztcbmltcG9ydCB7IFBhbmVsU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL3BhbmVsL3BhbmVsLnNlcnZpY2UnO1xuaW1wb3J0IHsgVmlydHVhbEJhY2tncm91bmRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvdmlydHVhbC1iYWNrZ3JvdW5kL3ZpcnR1YWwtYmFja2dyb3VuZC5zZXJ2aWNlJztcblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnb3YtYmFja2dyb3VuZC1lZmZlY3RzLXBhbmVsJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2JhY2tncm91bmQtZWZmZWN0cy1wYW5lbC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuLi9wYW5lbC5jb21wb25lbnQuY3NzJywnLi9iYWNrZ3JvdW5kLWVmZmVjdHMtcGFuZWwuY29tcG9uZW50LmNzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcbmV4cG9ydCBjbGFzcyBCYWNrZ3JvdW5kRWZmZWN0c1BhbmVsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBiYWNrZ3JvdW5kU2VsZWN0ZWRJZDogc3RyaW5nO1xuICBlZmZlY3RUeXBlID0gRWZmZWN0VHlwZTtcbiAgYmFja2dyb3VuZEltYWdlczogQmFja2dyb3VuZEVmZmVjdFtdID0gW107XG4gIG5vRWZmZWN0QW5kQmx1cnJlZEJhY2tncm91bmQ6IEJhY2tncm91bmRFZmZlY3RbXSA9IFtdO1xuICBwcml2YXRlIGJhY2tncm91bmRzOiBCYWNrZ3JvdW5kRWZmZWN0W107XG4gIHByaXZhdGUgYmFja2dyb3VuZFN1YnM6IFN1YnNjcmlwdGlvbjtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSBwYW5lbFNlcnZpY2VcbiAgICogQHBhcmFtIGJhY2tncm91bmRTZXJ2aWNlXG4gICAqIEBwYXJhbSBjZFxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBwYW5lbFNlcnZpY2U6IFBhbmVsU2VydmljZSwgcHJpdmF0ZSBiYWNrZ3JvdW5kU2VydmljZTogVmlydHVhbEJhY2tncm91bmRTZXJ2aWNlLCBwcml2YXRlIGNkOiBDaGFuZ2VEZXRlY3RvclJlZikgeyB9XG5cbiAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5zdWJzY3JpYmVUb0JhY2tncm91bmRTZWxlY3RlZCgpO1xuICAgIHRoaXMuYmFja2dyb3VuZHMgPSB0aGlzLmJhY2tncm91bmRTZXJ2aWNlLmdldEJhY2tncm91bmRzKCk7XG4gICAgdGhpcy5ub0VmZmVjdEFuZEJsdXJyZWRCYWNrZ3JvdW5kID0gdGhpcy5iYWNrZ3JvdW5kcy5maWx0ZXIoZiA9PiBmLnR5cGUgPT09IEVmZmVjdFR5cGUuQkxVUiB8fCBmLnR5cGUgPT09IEVmZmVjdFR5cGUuTk9ORSk7XG4gICAgdGhpcy5iYWNrZ3JvdW5kSW1hZ2VzID0gdGhpcy5iYWNrZ3JvdW5kcy5maWx0ZXIoZiA9PiBmLnR5cGUgPT09IEVmZmVjdFR5cGUuSU1BR0UpO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuYmFja2dyb3VuZFN1YnMpIHRoaXMuYmFja2dyb3VuZFN1YnMudW5zdWJzY3JpYmUoKTtcbiAgfVxuICBzdWJzY3JpYmVUb0JhY2tncm91bmRTZWxlY3RlZCgpIHtcbiAgICB0aGlzLmJhY2tncm91bmRTdWJzID0gdGhpcy5iYWNrZ3JvdW5kU2VydmljZS5iYWNrZ3JvdW5kU2VsZWN0ZWRPYnMuc3Vic2NyaWJlKChpZCkgPT4ge1xuICAgICAgdGhpcy5iYWNrZ3JvdW5kU2VsZWN0ZWRJZCA9IGlkO1xuICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMucGFuZWxTZXJ2aWNlLnRvZ2dsZVBhbmVsKFBhbmVsVHlwZS5CQUNLR1JPVU5EX0VGRkVDVFMpO1xuICB9XG5cbiAgYXN5bmMgYXBwbHlCYWNrZ3JvdW5kKGVmZmVjdDogQmFja2dyb3VuZEVmZmVjdCkge1xuICAgIGlmIChlZmZlY3QudHlwZSA9PT0gRWZmZWN0VHlwZS5OT05FKSB7XG4gICAgICBhd2FpdCB0aGlzLnJlbW92ZUJhY2tncm91bmQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5iYWNrZ3JvdW5kU2VydmljZS5hcHBseUJhY2tncm91bmQoZWZmZWN0KTtcbiAgICB9XG4gIH1cblxuICBhc3luYyByZW1vdmVCYWNrZ3JvdW5kKCkge1xuICAgIGF3YWl0IHRoaXMuYmFja2dyb3VuZFNlcnZpY2UucmVtb3ZlQmFja2dyb3VuZCgpO1xuICB9XG59XG4iLCI8ZGl2IGNsYXNzPVwicGFuZWwtY29udGFpbmVyXCIgaWQ9XCJiYWNrZ3JvdW5kLWVmZmVjdHMtY29udGFpbmVyXCIgZnhMYXlvdXQ9XCJjb2x1bW5cIiBmeExheW91dEFsaWduPVwic3BhY2UtZXZlbmx5IG5vbmVcIj5cblx0PGRpdiBjbGFzcz1cInBhbmVsLWhlYWRlci1jb250YWluZXJcIiBmeEZsZXg9XCI1NXB4XCIgZnhMYXlvdXRBbGlnbj1cInN0YXJ0IGNlbnRlclwiPlxuXHRcdDxoMyBjbGFzcz1cInBhbmVsLXRpdGxlXCI+e3sgJ1BBTkVMLkJBQ0tHUk9VTkQuVElUTEUnIHwgdHJhbnNsYXRlIH19PC9oMz5cblx0XHQ8YnV0dG9uIGNsYXNzPVwicGFuZWwtY2xvc2UtYnV0dG9uXCIgbWF0LWljb24tYnV0dG9uIG1hdFRvb2x0aXA9XCJ7eyAnUEFORUwuQ0xPU0UnIHwgdHJhbnNsYXRlIH19XCIgKGNsaWNrKT1cImNsb3NlKClcIj5cblx0XHRcdDxtYXQtaWNvbj5jbG9zZTwvbWF0LWljb24+XG5cdFx0PC9idXR0b24+XG5cdDwvZGl2PlxuXG5cdDxkaXYgY2xhc3M9XCJlZmZlY3RzLWNvbnRhaW5lclwiIGZ4RmxleD1cIjEwMCVcIiBmeExheW91dEFsaWduPVwic3BhY2UtZXZlbmx5IG5vbmVcIj5cblx0XHQ8ZGl2PlxuXHRcdFx0PGg0Pnt7ICdQQU5FTC5CQUNLR1JPVU5ELkJMVVJSRURfU0VDVElPTicgfCB0cmFuc2xhdGUgfX08L2g0PlxuXHRcdFx0PGRpdj5cblx0XHRcdFx0PGJ1dHRvblxuXHRcdFx0XHRcdCpuZ0Zvcj1cImxldCBlZmZlY3Qgb2Ygbm9FZmZlY3RBbmRCbHVycmVkQmFja2dyb3VuZFwiXG5cdFx0XHRcdFx0bWF0LWljb24tYnV0dG9uXG5cdFx0XHRcdFx0Y2xhc3M9XCJlZmZlY3QtYnV0dG9uXCJcblx0XHRcdFx0XHRbY2xhc3MuYWN0aXZlLWVmZmVjdC1idG5dPVwiYmFja2dyb3VuZFNlbGVjdGVkSWQgPT09IGVmZmVjdC5pZFwiXG5cdFx0XHRcdFx0KGNsaWNrKT1cImFwcGx5QmFja2dyb3VuZChlZmZlY3QpXCJcblx0XHRcdFx0PlxuXHRcdFx0XHRcdDxtYXQtaWNvblxuXHRcdFx0XHRcdFx0W21hdFRvb2x0aXBdPVwiXG5cdFx0XHRcdFx0XHRcdGVmZmVjdC50eXBlID09PSBlZmZlY3RUeXBlLk5PTkVcblx0XHRcdFx0XHRcdFx0XHQ/ICgnUEFORUwuQkFDS0dST1VORC5OT19FRkZFQ1RTJyB8IHRyYW5zbGF0ZSlcblx0XHRcdFx0XHRcdFx0XHQ6ICgnUEFORUwuQkFDS0dST1VORC5CTFVSUkVEX0VGRkVDVCcgfCB0cmFuc2xhdGUpXG5cdFx0XHRcdFx0XHRcIlxuXHRcdFx0XHRcdFx0Pnt7IGVmZmVjdC50aHVtYm5haWwgfX08L21hdC1pY29uXG5cdFx0XHRcdFx0PlxuXHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdFx0PCEtLSA8YnV0dG9uXG5cdFx0XHRcdFx0bWF0LWljb24tYnV0dG9uXG5cdFx0XHRcdFx0Y2xhc3M9XCJlZmZlY3QtYnV0dG9uXCJcblx0XHRcdFx0XHRpZD1cImhhcmQtYmx1ci1idG5cIlxuXHRcdFx0XHRcdFtjbGFzcy5hY3RpdmUtZWZmZWN0LWJ0bl09XCJiYWNrZ3JvdW5kU2VsZWN0ZWRJZCA9PT0gJ2hhcmRfYmx1cidcIlxuXHRcdFx0XHRcdChjbGljayk9XCJhcHBseUJhY2tncm91bmQoJ2hhcmRfYmx1cicpXCJcblx0XHRcdFx0PlxuXHRcdFx0XHRcdDxtYXQtaWNvbiBtYXRUb29sdGlwPVwiSGFyZCBibHVyIGVmZmVjdFwiPmJsdXJfb248L21hdC1pY29uPlxuXHRcdFx0XHQ8L2J1dHRvbj4gLS0+XG5cdFx0XHQ8L2Rpdj5cblx0XHQ8L2Rpdj5cblx0XHQ8aHIgLz5cblx0XHQ8ZGl2PlxuXHRcdFx0PGg0Pnt7ICdQQU5FTC5CQUNLR1JPVU5ELklNQUdFU19TRUNUSU9OJyB8IHRyYW5zbGF0ZSB9fTwvaDQ+XG5cblx0XHRcdDxkaXYgY2xhc3M9XCJncmlkXCI+XG5cdFx0XHRcdDxkaXZcblx0XHRcdFx0XHQqbmdGb3I9XCJsZXQgZWZmZWN0IG9mIGJhY2tncm91bmRJbWFnZXNcIlxuXHRcdFx0XHRcdGNsYXNzPVwiZWZmZWN0LWJ1dHRvblwiXG5cdFx0XHRcdFx0W2NsYXNzLmFjdGl2ZS1lZmZlY3QtYnRuXT1cImJhY2tncm91bmRTZWxlY3RlZElkID09PSBlZmZlY3QuaWRcIlxuXHRcdFx0XHRcdChjbGljayk9XCJhcHBseUJhY2tncm91bmQoZWZmZWN0KVwiXG5cdFx0XHRcdD5cblx0XHRcdFx0XHQ8aW1nIFtzcmNdPVwiZWZmZWN0LnRodW1ibmFpbFwiIC8+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0PC9kaXY+XG5cdFx0PC9kaXY+XG5cdDwvZGl2PlxuPC9kaXY+XG4iXX0=