import { Component, ElementRef, EventEmitter, Output, ViewChild } from '@angular/core';
import { UntypedFormControl, Validators } from '@angular/forms';
import * as i0 from "@angular/core";
import * as i1 from "../../services/config/openvidu-angular.config.service";
import * as i2 from "../../services/action/action.service";
import * as i3 from "@angular/common";
import * as i4 from "@angular/forms";
import * as i5 from "@angular/material/button";
import * as i6 from "@angular/material/card";
import * as i7 from "@angular/material/toolbar";
import * as i8 from "@angular/material/form-field";
import * as i9 from "@angular/material/input";
import * as i10 from "@angular/material/progress-spinner";
import * as i11 from "../../pipes/translate.pipe";
export class AdminLoginComponent {
    /**
     * @internal
     */
    constructor(libService, actionService) {
        this.libService = libService;
        this.actionService = actionService;
        /**
         * Provides event notifications that fire when login button has been clicked.
         * The event will contain the password value.
         */
        this.onLoginButtonClicked = new EventEmitter();
        /**
         * @internal
         */
        this.checkingLogged = false;
        /**
         * @internal
         */
        this.showSpinner = false;
        /**
         * @internal
         */
        this.loginFormControl = new UntypedFormControl('', [Validators.required]);
        /**
         * @internal
         */
        this.matcher = new FormErrorStateMatcher();
    }
    /**
     * @internal
     */
    ngOnInit() {
        this.subscribeToAdminLoginDirectives();
    }
    /**
     * @internal
     */
    ngOnDestroy() {
        this.showSpinner = false;
        if (this.errorSub)
            this.errorSub.unsubscribe();
    }
    /**
     * @internal
     */
    login() {
        this.showSpinner = true;
        this.onLoginButtonClicked.emit(this.secret);
    }
    /**
     * @internal
     */
    submitForm() {
        if (this.loginForm.nativeElement.checkValidity()) {
            this.login();
        }
        else {
            this.submitBtn.nativeElement.click();
        }
    }
    subscribeToAdminLoginDirectives() {
        this.errorSub = this.libService.adminLoginErrorObs.subscribe((value) => {
            const errorExists = !!value;
            if (errorExists) {
                this.showSpinner = false;
                this.actionService.openDialog(value.error, value.message, true);
            }
        });
    }
}
AdminLoginComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.8", ngImport: i0, type: AdminLoginComponent, deps: [{ token: i1.OpenViduAngularConfigService }, { token: i2.ActionService }], target: i0.ɵɵFactoryTarget.Component });
AdminLoginComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.8", type: AdminLoginComponent, selector: "ov-admin-login", outputs: { onLoginButtonClicked: "onLoginButtonClicked" }, viewQueries: [{ propertyName: "submitBtn", first: true, predicate: ["submitBtn"], descendants: true }, { propertyName: "loginForm", first: true, predicate: ["loginForm"], descendants: true, read: ElementRef }], ngImport: i0, template: "<mat-toolbar class=\"header\">\n</mat-toolbar>\n\n<div *ngIf=\"checkingLogged\" class=\"outer\">\n\t<div class=\"middle\">\n\t\t<div class=\"inner\">\n\t\t\t<mat-spinner *ngIf=\"checkingLogged\"></mat-spinner>\n\t\t</div>\n\t</div>\n</div>\n\n<mat-card *ngIf=\"!checkingLogged\">\n\t<mat-card-content>\n\t\t<form ngNativeValidate #loginForm (ngSubmit)=\"login()\">\n\t\t\t<table class=\"full-width\" cellspacing=\"0\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<mat-form-field id=\"secret-field\" class=\"full-width\" appearance=\"outline\">\n\t\t\t\t\t\t\t<mat-label>{{ 'ADMIN.SECRET' | translate }}</mat-label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"secret-input\"\n\t\t\t\t\t\t\t\tmatInput\n\t\t\t\t\t\t\t\t[(ngModel)]=\"secret\"\n\t\t\t\t\t\t\t\t[disabled]=\"showSpinner\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tname=\"secret\"\n\t\t\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<mat-error *ngIf=\"loginFormControl.hasError('required')\"> {{ 'ADMIN.SECRET_REQURED' | translate }} </mat-error>\n\t\t\t\t\t\t</mat-form-field>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<input #submitBtn type=\"submit\" [style.display]=\"'none'\" />\n\t\t</form>\n\t\t<mat-spinner [style.display]=\"showSpinner ? 'block' : 'none'\"></mat-spinner>\n\t</mat-card-content>\n\t<mat-card-actions>\n\t\t<button mat-flat-button id=\"login-btn\" type=\"submit\" (click)=\"submitForm()\" color=\"primary\" class=\"full-width\">\n\t\t\t{{ 'ADMIN.LOGIN' | translate }}\n\t\t</button>\n\t</mat-card-actions>\n</mat-card>\n", styles: ["mat-card{max-width:220px;margin:auto;margin-top:10vh}mat-card-content{margin-bottom:8px}mat-card-actions{padding-top:0}.header{height:50px;background-color:var(--ov-secondary-color);color:var(--ov-text-color)}mat-spinner{margin:auto}.mat-card-actions{margin:0}.full-width{width:100%}.outer{display:table;position:absolute;height:100%;width:100%}.middle{display:table-cell;vertical-align:middle}.inner{margin-left:auto;margin-right:auto}#login-btn{text-transform:none;font-size:17px;width:100%}::ng-deep .mat-input-element{caret-color:#000}::ng-deep .mat-primary .mat-option.mat-selected:not(.mat-option-disabled){color:#000}::ng-deep .mat-form-field-label{color:var(--ov-panel-text-color)!important}::ng-deep .mat-form-field.mat-focused .mat-form-field-ripple{background-color:var(--ov-panel-text-color)!important}\n"], dependencies: [{ kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i4.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i4.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i4.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i4.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { kind: "directive", type: i4.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "directive", type: i4.NgForm, selector: "form:not([ngNoForm]):not([formGroup]),ng-form,[ngForm]", inputs: ["ngFormOptions"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "component", type: i5.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { kind: "component", type: i6.MatCard, selector: "mat-card", exportAs: ["matCard"] }, { kind: "directive", type: i6.MatCardContent, selector: "mat-card-content, [mat-card-content], [matCardContent]" }, { kind: "directive", type: i6.MatCardActions, selector: "mat-card-actions", inputs: ["align"], exportAs: ["matCardActions"] }, { kind: "component", type: i7.MatToolbar, selector: "mat-toolbar", inputs: ["color"], exportAs: ["matToolbar"] }, { kind: "directive", type: i8.MatError, selector: "mat-error", inputs: ["id"] }, { kind: "component", type: i8.MatFormField, selector: "mat-form-field", inputs: ["color", "appearance", "hideRequiredMarker", "hintLabel", "floatLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i8.MatLabel, selector: "mat-label" }, { kind: "directive", type: i9.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "component", type: i10.MatProgressSpinner, selector: "mat-progress-spinner, mat-spinner", inputs: ["color", "diameter", "strokeWidth", "mode", "value"], exportAs: ["matProgressSpinner"] }, { kind: "pipe", type: i11.TranslatePipe, name: "translate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.8", ngImport: i0, type: AdminLoginComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ov-admin-login', template: "<mat-toolbar class=\"header\">\n</mat-toolbar>\n\n<div *ngIf=\"checkingLogged\" class=\"outer\">\n\t<div class=\"middle\">\n\t\t<div class=\"inner\">\n\t\t\t<mat-spinner *ngIf=\"checkingLogged\"></mat-spinner>\n\t\t</div>\n\t</div>\n</div>\n\n<mat-card *ngIf=\"!checkingLogged\">\n\t<mat-card-content>\n\t\t<form ngNativeValidate #loginForm (ngSubmit)=\"login()\">\n\t\t\t<table class=\"full-width\" cellspacing=\"0\">\n\t\t\t\t<tr>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<mat-form-field id=\"secret-field\" class=\"full-width\" appearance=\"outline\">\n\t\t\t\t\t\t\t<mat-label>{{ 'ADMIN.SECRET' | translate }}</mat-label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tid=\"secret-input\"\n\t\t\t\t\t\t\t\tmatInput\n\t\t\t\t\t\t\t\t[(ngModel)]=\"secret\"\n\t\t\t\t\t\t\t\t[disabled]=\"showSpinner\"\n\t\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\t\tname=\"secret\"\n\t\t\t\t\t\t\t\tautocomplete=\"current-password\"\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<mat-error *ngIf=\"loginFormControl.hasError('required')\"> {{ 'ADMIN.SECRET_REQURED' | translate }} </mat-error>\n\t\t\t\t\t\t</mat-form-field>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t</table>\n\t\t\t<input #submitBtn type=\"submit\" [style.display]=\"'none'\" />\n\t\t</form>\n\t\t<mat-spinner [style.display]=\"showSpinner ? 'block' : 'none'\"></mat-spinner>\n\t</mat-card-content>\n\t<mat-card-actions>\n\t\t<button mat-flat-button id=\"login-btn\" type=\"submit\" (click)=\"submitForm()\" color=\"primary\" class=\"full-width\">\n\t\t\t{{ 'ADMIN.LOGIN' | translate }}\n\t\t</button>\n\t</mat-card-actions>\n</mat-card>\n", styles: ["mat-card{max-width:220px;margin:auto;margin-top:10vh}mat-card-content{margin-bottom:8px}mat-card-actions{padding-top:0}.header{height:50px;background-color:var(--ov-secondary-color);color:var(--ov-text-color)}mat-spinner{margin:auto}.mat-card-actions{margin:0}.full-width{width:100%}.outer{display:table;position:absolute;height:100%;width:100%}.middle{display:table-cell;vertical-align:middle}.inner{margin-left:auto;margin-right:auto}#login-btn{text-transform:none;font-size:17px;width:100%}::ng-deep .mat-input-element{caret-color:#000}::ng-deep .mat-primary .mat-option.mat-selected:not(.mat-option-disabled){color:#000}::ng-deep .mat-form-field-label{color:var(--ov-panel-text-color)!important}::ng-deep .mat-form-field.mat-focused .mat-form-field-ripple{background-color:var(--ov-panel-text-color)!important}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.OpenViduAngularConfigService }, { type: i2.ActionService }]; }, propDecorators: { onLoginButtonClicked: [{
                type: Output
            }], submitBtn: [{
                type: ViewChild,
                args: ['submitBtn']
            }], loginForm: [{
                type: ViewChild,
                args: ['loginForm', { read: ElementRef }]
            }] } });
/**
 * @internal
 */
export class FormErrorStateMatcher {
    isErrorState(control, form) {
        const isSubmitted = form && form.submitted;
        return !!(control && control.invalid && (control.dirty || control.touched || isSubmitted));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9naW4uY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvb3BlbnZpZHUtYW5ndWxhci9zcmMvbGliL2FkbWluL2xvZ2luL2xvZ2luLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL29wZW52aWR1LWFuZ3VsYXIvc3JjL2xpYi9hZG1pbi9sb2dpbi9sb2dpbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQVUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvRixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsVUFBVSxFQUE4QixNQUFNLGdCQUFnQixDQUFDOzs7Ozs7Ozs7Ozs7O0FBVzVGLE1BQU0sT0FBTyxtQkFBbUI7SUF3Qy9COztPQUVHO0lBQ0gsWUFBb0IsVUFBd0MsRUFBVSxhQUE0QjtRQUE5RSxlQUFVLEdBQVYsVUFBVSxDQUE4QjtRQUFVLGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBMUNsRzs7O1dBR0c7UUFDTyx5QkFBb0IsR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUVsRjs7V0FFRztRQUNILG1CQUFjLEdBQUcsS0FBSyxDQUFDO1FBS3ZCOztXQUVHO1FBQ0gsZ0JBQVcsR0FBRyxLQUFLLENBQUM7UUFFcEI7O1dBRUc7UUFDSCxxQkFBZ0IsR0FBRyxJQUFJLGtCQUFrQixDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3JFOztXQUVHO1FBQ0gsWUFBTyxHQUFHLElBQUkscUJBQXFCLEVBQUUsQ0FBQztJQWdCK0QsQ0FBQztJQUV0Rzs7T0FFRztJQUNILFFBQVE7UUFDUCxJQUFJLENBQUMsK0JBQStCLEVBQUUsQ0FBQztJQUN4QyxDQUFDO0lBRUQ7O09BRUc7SUFDSCxXQUFXO1FBQ1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDekIsSUFBSSxJQUFJLENBQUMsUUFBUTtZQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDaEQsQ0FBQztJQUVEOztPQUVHO0lBQ0gsS0FBSztRQUNKLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRDs7T0FFRztJQUNILFVBQVU7UUFDVCxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsYUFBYSxDQUFDLGFBQWEsRUFBRSxFQUFFO1lBQ2pELElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNiO2FBQU07WUFDTixJQUFJLENBQUMsU0FBUyxDQUFDLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNyQztJQUNGLENBQUM7SUFFTywrQkFBK0I7UUFDdEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1lBQ3RFLE1BQU0sV0FBVyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUM7WUFDNUIsSUFBSSxXQUFXLEVBQUU7Z0JBQ2hCLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO2dCQUN6QixJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUM7YUFDaEU7UUFDRixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7O2dIQXZGVyxtQkFBbUI7b0dBQW5CLG1CQUFtQiw2UkFvQ0MsVUFBVSw2QkNoRDNDLG1qREE0Q0E7MkZEaENhLG1CQUFtQjtrQkFML0IsU0FBUzsrQkFDQyxnQkFBZ0I7K0lBU2hCLG9CQUFvQjtzQkFBN0IsTUFBTTtnQkEyQmlCLFNBQVM7c0JBQWhDLFNBQVM7dUJBQUMsV0FBVztnQkFJd0IsU0FBUztzQkFBdEQsU0FBUzt1QkFBQyxXQUFXLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFOztBQXFEN0M7O0dBRUc7QUFDSCxNQUFNLE9BQU8scUJBQXFCO0lBQ2pDLFlBQVksQ0FBQyxPQUFrQyxFQUFFLElBQXdDO1FBQ3hGLE1BQU0sV0FBVyxHQUFHLElBQUksSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQzNDLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxJQUFJLE9BQU8sQ0FBQyxPQUFPLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQztJQUM1RixDQUFDO0NBQ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgT25Jbml0LCBPdXRwdXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVW50eXBlZEZvcm1Db250cm9sLCBWYWxpZGF0b3JzLCBGb3JtR3JvdXBEaXJlY3RpdmUsIE5nRm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IEVycm9yU3RhdGVNYXRjaGVyIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvY29yZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEFjdGlvblNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9hY3Rpb24vYWN0aW9uLnNlcnZpY2UnO1xuaW1wb3J0IHsgT3BlblZpZHVBbmd1bGFyQ29uZmlnU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2NvbmZpZy9vcGVudmlkdS1hbmd1bGFyLmNvbmZpZy5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG5cdHNlbGVjdG9yOiAnb3YtYWRtaW4tbG9naW4nLFxuXHR0ZW1wbGF0ZVVybDogJy4vbG9naW4uY29tcG9uZW50Lmh0bWwnLFxuXHRzdHlsZVVybHM6IFsnLi9sb2dpbi5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgQWRtaW5Mb2dpbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cdC8qKlxuXHQgKiBQcm92aWRlcyBldmVudCBub3RpZmljYXRpb25zIHRoYXQgZmlyZSB3aGVuIGxvZ2luIGJ1dHRvbiBoYXMgYmVlbiBjbGlja2VkLlxuXHQgKiBUaGUgZXZlbnQgd2lsbCBjb250YWluIHRoZSBwYXNzd29yZCB2YWx1ZS5cblx0ICovXG5cdEBPdXRwdXQoKSBvbkxvZ2luQnV0dG9uQ2xpY2tlZDogRXZlbnRFbWl0dGVyPHN0cmluZz4gPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcblxuXHQvKipcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRjaGVja2luZ0xvZ2dlZCA9IGZhbHNlO1xuXHQvKipcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRzZWNyZXQ6IHN0cmluZztcblx0LyoqXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0c2hvd1NwaW5uZXIgPSBmYWxzZTtcblxuXHQvKipcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRsb2dpbkZvcm1Db250cm9sID0gbmV3IFVudHlwZWRGb3JtQ29udHJvbCgnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWRdKTtcblx0LyoqXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0bWF0Y2hlciA9IG5ldyBGb3JtRXJyb3JTdGF0ZU1hdGNoZXIoKTtcblxuXHQvKipcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRAVmlld0NoaWxkKCdzdWJtaXRCdG4nKSBzdWJtaXRCdG46IEVsZW1lbnRSZWY7XG5cdC8qKlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdEBWaWV3Q2hpbGQoJ2xvZ2luRm9ybScsIHsgcmVhZDogRWxlbWVudFJlZiB9KSBsb2dpbkZvcm06IEVsZW1lbnRSZWY7XG5cblx0cHJpdmF0ZSBlcnJvclN1YjogU3Vic2NyaXB0aW9uO1xuXG5cdC8qKlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgbGliU2VydmljZTogT3BlblZpZHVBbmd1bGFyQ29uZmlnU2VydmljZSwgcHJpdmF0ZSBhY3Rpb25TZXJ2aWNlOiBBY3Rpb25TZXJ2aWNlKSB7fVxuXG5cdC8qKlxuXHQgKiBAaW50ZXJuYWxcblx0ICovXG5cdG5nT25Jbml0KCkge1xuXHRcdHRoaXMuc3Vic2NyaWJlVG9BZG1pbkxvZ2luRGlyZWN0aXZlcygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0bmdPbkRlc3Ryb3koKSB7XG5cdFx0dGhpcy5zaG93U3Bpbm5lciA9IGZhbHNlO1xuXHRcdGlmICh0aGlzLmVycm9yU3ViKSB0aGlzLmVycm9yU3ViLnVuc3Vic2NyaWJlKCk7XG5cdH1cblxuXHQvKipcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRsb2dpbigpIHtcblx0XHR0aGlzLnNob3dTcGlubmVyID0gdHJ1ZTtcblx0XHR0aGlzLm9uTG9naW5CdXR0b25DbGlja2VkLmVtaXQodGhpcy5zZWNyZXQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0c3VibWl0Rm9ybSgpIHtcblx0XHRpZiAodGhpcy5sb2dpbkZvcm0ubmF0aXZlRWxlbWVudC5jaGVja1ZhbGlkaXR5KCkpIHtcblx0XHRcdHRoaXMubG9naW4oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zdWJtaXRCdG4ubmF0aXZlRWxlbWVudC5jbGljaygpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgc3Vic2NyaWJlVG9BZG1pbkxvZ2luRGlyZWN0aXZlcygpIHtcblx0XHR0aGlzLmVycm9yU3ViID0gdGhpcy5saWJTZXJ2aWNlLmFkbWluTG9naW5FcnJvck9icy5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XG5cdFx0XHRjb25zdCBlcnJvckV4aXN0cyA9ICEhdmFsdWU7XG5cdFx0XHRpZiAoZXJyb3JFeGlzdHMpIHtcblx0XHRcdFx0dGhpcy5zaG93U3Bpbm5lciA9IGZhbHNlO1xuXHRcdFx0XHR0aGlzLmFjdGlvblNlcnZpY2Uub3BlbkRpYWxvZyh2YWx1ZS5lcnJvciwgdmFsdWUubWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCBjbGFzcyBGb3JtRXJyb3JTdGF0ZU1hdGNoZXIgaW1wbGVtZW50cyBFcnJvclN0YXRlTWF0Y2hlciB7XG5cdGlzRXJyb3JTdGF0ZShjb250cm9sOiBVbnR5cGVkRm9ybUNvbnRyb2wgfCBudWxsLCBmb3JtOiBGb3JtR3JvdXBEaXJlY3RpdmUgfCBOZ0Zvcm0gfCBudWxsKTogYm9vbGVhbiB7XG5cdFx0Y29uc3QgaXNTdWJtaXR0ZWQgPSBmb3JtICYmIGZvcm0uc3VibWl0dGVkO1xuXHRcdHJldHVybiAhIShjb250cm9sICYmIGNvbnRyb2wuaW52YWxpZCAmJiAoY29udHJvbC5kaXJ0eSB8fCBjb250cm9sLnRvdWNoZWQgfHwgaXNTdWJtaXR0ZWQpKTtcblx0fVxufVxuIiwiPG1hdC10b29sYmFyIGNsYXNzPVwiaGVhZGVyXCI+XG48L21hdC10b29sYmFyPlxuXG48ZGl2ICpuZ0lmPVwiY2hlY2tpbmdMb2dnZWRcIiBjbGFzcz1cIm91dGVyXCI+XG5cdDxkaXYgY2xhc3M9XCJtaWRkbGVcIj5cblx0XHQ8ZGl2IGNsYXNzPVwiaW5uZXJcIj5cblx0XHRcdDxtYXQtc3Bpbm5lciAqbmdJZj1cImNoZWNraW5nTG9nZ2VkXCI+PC9tYXQtc3Bpbm5lcj5cblx0XHQ8L2Rpdj5cblx0PC9kaXY+XG48L2Rpdj5cblxuPG1hdC1jYXJkICpuZ0lmPVwiIWNoZWNraW5nTG9nZ2VkXCI+XG5cdDxtYXQtY2FyZC1jb250ZW50PlxuXHRcdDxmb3JtIG5nTmF0aXZlVmFsaWRhdGUgI2xvZ2luRm9ybSAobmdTdWJtaXQpPVwibG9naW4oKVwiPlxuXHRcdFx0PHRhYmxlIGNsYXNzPVwiZnVsbC13aWR0aFwiIGNlbGxzcGFjaW5nPVwiMFwiPlxuXHRcdFx0XHQ8dHI+XG5cdFx0XHRcdFx0PHRkPlxuXHRcdFx0XHRcdFx0PG1hdC1mb3JtLWZpZWxkIGlkPVwic2VjcmV0LWZpZWxkXCIgY2xhc3M9XCJmdWxsLXdpZHRoXCIgYXBwZWFyYW5jZT1cIm91dGxpbmVcIj5cblx0XHRcdFx0XHRcdFx0PG1hdC1sYWJlbD57eyAnQURNSU4uU0VDUkVUJyB8IHRyYW5zbGF0ZSB9fTwvbWF0LWxhYmVsPlxuXHRcdFx0XHRcdFx0XHQ8aW5wdXRcblx0XHRcdFx0XHRcdFx0XHRpZD1cInNlY3JldC1pbnB1dFwiXG5cdFx0XHRcdFx0XHRcdFx0bWF0SW5wdXRcblx0XHRcdFx0XHRcdFx0XHRbKG5nTW9kZWwpXT1cInNlY3JldFwiXG5cdFx0XHRcdFx0XHRcdFx0W2Rpc2FibGVkXT1cInNob3dTcGlubmVyXCJcblx0XHRcdFx0XHRcdFx0XHR0eXBlPVwicGFzc3dvcmRcIlxuXHRcdFx0XHRcdFx0XHRcdG5hbWU9XCJzZWNyZXRcIlxuXHRcdFx0XHRcdFx0XHRcdGF1dG9jb21wbGV0ZT1cImN1cnJlbnQtcGFzc3dvcmRcIlxuXHRcdFx0XHRcdFx0XHRcdHJlcXVpcmVkXG5cdFx0XHRcdFx0XHRcdC8+XG5cdFx0XHRcdFx0XHRcdDxtYXQtZXJyb3IgKm5nSWY9XCJsb2dpbkZvcm1Db250cm9sLmhhc0Vycm9yKCdyZXF1aXJlZCcpXCI+IHt7ICdBRE1JTi5TRUNSRVRfUkVRVVJFRCcgfCB0cmFuc2xhdGUgfX0gPC9tYXQtZXJyb3I+XG5cdFx0XHRcdFx0XHQ8L21hdC1mb3JtLWZpZWxkPlxuXHRcdFx0XHRcdDwvdGQ+XG5cdFx0XHRcdDwvdHI+XG5cdFx0XHQ8L3RhYmxlPlxuXHRcdFx0PGlucHV0ICNzdWJtaXRCdG4gdHlwZT1cInN1Ym1pdFwiIFtzdHlsZS5kaXNwbGF5XT1cIidub25lJ1wiIC8+XG5cdFx0PC9mb3JtPlxuXHRcdDxtYXQtc3Bpbm5lciBbc3R5bGUuZGlzcGxheV09XCJzaG93U3Bpbm5lciA/ICdibG9jaycgOiAnbm9uZSdcIj48L21hdC1zcGlubmVyPlxuXHQ8L21hdC1jYXJkLWNvbnRlbnQ+XG5cdDxtYXQtY2FyZC1hY3Rpb25zPlxuXHRcdDxidXR0b24gbWF0LWZsYXQtYnV0dG9uIGlkPVwibG9naW4tYnRuXCIgdHlwZT1cInN1Ym1pdFwiIChjbGljayk9XCJzdWJtaXRGb3JtKClcIiBjb2xvcj1cInByaW1hcnlcIiBjbGFzcz1cImZ1bGwtd2lkdGhcIj5cblx0XHRcdHt7ICdBRE1JTi5MT0dJTicgfCB0cmFuc2xhdGUgfX1cblx0XHQ8L2J1dHRvbj5cblx0PC9tYXQtY2FyZC1hY3Rpb25zPlxuPC9tYXQtY2FyZD5cbiJdfQ==