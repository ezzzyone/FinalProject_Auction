import { Component } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "../../../services/participant/participant.service";
import * as i2 from "../../../services/storage/storage.service";
import * as i3 from "@angular/forms";
import * as i4 from "@angular/material/button";
import * as i5 from "@angular/material/icon";
import * as i6 from "@angular/material/form-field";
import * as i7 from "@angular/material/input";
import * as i8 from "../../../pipes/translate.pipe";
/**
 * @internal
 */
export class NicknameInputComponent {
    constructor(participantService, storageSrv) {
        this.participantService = participantService;
        this.storageSrv = storageSrv;
    }
    ngOnInit() {
        this.subscribeToParticipantProperties();
        this.nickname = this.participantService.getMyNickname();
    }
    updateNickname() {
        this.nickname = this.nickname === '' ? this.participantService.getMyNickname() : this.nickname;
        this.participantService.setMyNickname(this.nickname);
        this.storageSrv.setNickname(this.nickname);
    }
    subscribeToParticipantProperties() {
        this.localParticipantSubscription = this.participantService.localParticipantObs.subscribe((p) => {
            if (p) {
                this.nickname = p.getNickname();
            }
        });
    }
}
NicknameInputComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.8", ngImport: i0, type: NicknameInputComponent, deps: [{ token: i1.ParticipantService }, { token: i2.StorageService }], target: i0.ɵɵFactoryTarget.Component });
NicknameInputComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.8", type: NicknameInputComponent, selector: "ov-nickname-input", ngImport: i0, template: "<div id=\"nickname-input-container\">\n\t<button mat-icon-button disabled>\n\t\t<mat-icon>person</mat-icon>\n\t</button>\n\t<mat-form-field appearance=\"standard\">\n\t\t<mat-label>{{ 'PREJOIN.NICKNAME' | translate }}</mat-label>\n\t\t<input\n\t\t\tmatInput\n\t\t\ttype=\"text\"\n\t\t\tmaxlength=\"20\"\n\t\t\t[(ngModel)]=\"nickname\"\n\t\t\t(change)=\"updateNickname()\"\n\t\t\tautocomplete=\"off\"\n\t\t/>\n\t</mat-form-field>\n</div>", styles: ["#nickname-input-container{display:flex}#nickname-input-container button{margin:auto 10px auto auto}#nickname-input-container button.mat-button-disabled{color:#000!important}#nickname-input-container mat-form-field{width:100%;margin-top:10px;color:#000}#nickname-input-container mat-form-field{color:#000}\n"], dependencies: [{ kind: "directive", type: i3.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i3.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i3.MaxLengthValidator, selector: "[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]", inputs: ["maxlength"] }, { kind: "directive", type: i3.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "component", type: i4.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { kind: "component", type: i5.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: i6.MatFormField, selector: "mat-form-field", inputs: ["color", "appearance", "hideRequiredMarker", "hintLabel", "floatLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i6.MatLabel, selector: "mat-label" }, { kind: "directive", type: i7.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "pipe", type: i8.TranslatePipe, name: "translate" }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.8", ngImport: i0, type: NicknameInputComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ov-nickname-input', template: "<div id=\"nickname-input-container\">\n\t<button mat-icon-button disabled>\n\t\t<mat-icon>person</mat-icon>\n\t</button>\n\t<mat-form-field appearance=\"standard\">\n\t\t<mat-label>{{ 'PREJOIN.NICKNAME' | translate }}</mat-label>\n\t\t<input\n\t\t\tmatInput\n\t\t\ttype=\"text\"\n\t\t\tmaxlength=\"20\"\n\t\t\t[(ngModel)]=\"nickname\"\n\t\t\t(change)=\"updateNickname()\"\n\t\t\tautocomplete=\"off\"\n\t\t/>\n\t</mat-form-field>\n</div>", styles: ["#nickname-input-container{display:flex}#nickname-input-container button{margin:auto 10px auto auto}#nickname-input-container button.mat-button-disabled{color:#000!important}#nickname-input-container mat-form-field{width:100%;margin-top:10px;color:#000}#nickname-input-container mat-form-field{color:#000}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.ParticipantService }, { type: i2.StorageService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmlja25hbWUtaW5wdXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvb3BlbnZpZHUtYW5ndWxhci9zcmMvbGliL2NvbXBvbmVudHMvc2V0dGluZ3Mvbmlja25hbWUtaW5wdXQvbmlja25hbWUtaW5wdXQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvb3BlbnZpZHUtYW5ndWxhci9zcmMvbGliL2NvbXBvbmVudHMvc2V0dGluZ3Mvbmlja25hbWUtaW5wdXQvbmlja25hbWUtaW5wdXQuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxNQUFNLGVBQWUsQ0FBQzs7Ozs7Ozs7OztBQU9sRDs7R0FFRztBQU1ILE1BQU0sT0FBTyxzQkFBc0I7SUFJbEMsWUFBb0Isa0JBQXNDLEVBQVUsVUFBMEI7UUFBMUUsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUFvQjtRQUFVLGVBQVUsR0FBVixVQUFVLENBQWdCO0lBQUcsQ0FBQztJQUVsRyxRQUFRO1FBQ1AsSUFBSSxDQUFDLGdDQUFnQyxFQUFFLENBQUM7UUFDeEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxFQUFFLENBQUM7SUFDekQsQ0FBQztJQUVELGNBQWM7UUFDYixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDL0YsSUFBSSxDQUFDLGtCQUFrQixDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDckQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFFTyxnQ0FBZ0M7UUFDdkMsSUFBSSxDQUFDLDRCQUE0QixHQUFHLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUEyQixFQUFFLEVBQUU7WUFDekgsSUFBSSxDQUFDLEVBQUU7Z0JBQ04sSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7YUFDaEM7UUFDRixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7O21IQXZCVyxzQkFBc0I7dUdBQXRCLHNCQUFzQix5RENmbkMsc2JBZU07MkZEQU8sc0JBQXNCO2tCQUxsQyxTQUFTOytCQUNDLG1CQUFtQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFBhcnRpY2lwYW50QWJzdHJhY3RNb2RlbCB9IGZyb20gJy4uLy4uLy4uL21vZGVscy9wYXJ0aWNpcGFudC5tb2RlbCc7XG5pbXBvcnQgeyBQYXJ0aWNpcGFudFNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9wYXJ0aWNpcGFudC9wYXJ0aWNpcGFudC5zZXJ2aWNlJztcbmltcG9ydCB7IFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvc3RvcmFnZS9zdG9yYWdlLnNlcnZpY2UnO1xuXG5cbi8qKlxuICogQGludGVybmFsXG4gKi9cbkBDb21wb25lbnQoe1xuXHRzZWxlY3RvcjogJ292LW5pY2tuYW1lLWlucHV0Jyxcblx0dGVtcGxhdGVVcmw6ICcuL25pY2tuYW1lLWlucHV0LmNvbXBvbmVudC5odG1sJyxcblx0c3R5bGVVcmxzOiBbJy4vbmlja25hbWUtaW5wdXQuY29tcG9uZW50LmNzcyddXG59KVxuZXhwb3J0IGNsYXNzIE5pY2tuYW1lSW5wdXRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXHRuaWNrbmFtZTogc3RyaW5nO1xuXHRsb2NhbFBhcnRpY2lwYW50U3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSBwYXJ0aWNpcGFudFNlcnZpY2U6IFBhcnRpY2lwYW50U2VydmljZSwgcHJpdmF0ZSBzdG9yYWdlU3J2OiBTdG9yYWdlU2VydmljZSkge31cblxuXHRuZ09uSW5pdCgpOiB2b2lkIHtcblx0XHR0aGlzLnN1YnNjcmliZVRvUGFydGljaXBhbnRQcm9wZXJ0aWVzKCk7XG5cdFx0dGhpcy5uaWNrbmFtZSA9IHRoaXMucGFydGljaXBhbnRTZXJ2aWNlLmdldE15Tmlja25hbWUoKTtcblx0fVxuXG5cdHVwZGF0ZU5pY2tuYW1lKCkge1xuXHRcdHRoaXMubmlja25hbWUgPSB0aGlzLm5pY2tuYW1lID09PSAnJyA/IHRoaXMucGFydGljaXBhbnRTZXJ2aWNlLmdldE15Tmlja25hbWUoKSA6IHRoaXMubmlja25hbWU7XG5cdFx0dGhpcy5wYXJ0aWNpcGFudFNlcnZpY2Uuc2V0TXlOaWNrbmFtZSh0aGlzLm5pY2tuYW1lKTtcblx0XHR0aGlzLnN0b3JhZ2VTcnYuc2V0Tmlja25hbWUodGhpcy5uaWNrbmFtZSk7XG5cdH1cblxuXHRwcml2YXRlIHN1YnNjcmliZVRvUGFydGljaXBhbnRQcm9wZXJ0aWVzKCkge1xuXHRcdHRoaXMubG9jYWxQYXJ0aWNpcGFudFN1YnNjcmlwdGlvbiA9IHRoaXMucGFydGljaXBhbnRTZXJ2aWNlLmxvY2FsUGFydGljaXBhbnRPYnMuc3Vic2NyaWJlKChwOiBQYXJ0aWNpcGFudEFic3RyYWN0TW9kZWwpID0+IHtcblx0XHRcdGlmIChwKSB7XG5cdFx0XHRcdHRoaXMubmlja25hbWUgPSBwLmdldE5pY2tuYW1lKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn1cbiIsIjxkaXYgaWQ9XCJuaWNrbmFtZS1pbnB1dC1jb250YWluZXJcIj5cblx0PGJ1dHRvbiBtYXQtaWNvbi1idXR0b24gZGlzYWJsZWQ+XG5cdFx0PG1hdC1pY29uPnBlcnNvbjwvbWF0LWljb24+XG5cdDwvYnV0dG9uPlxuXHQ8bWF0LWZvcm0tZmllbGQgYXBwZWFyYW5jZT1cInN0YW5kYXJkXCI+XG5cdFx0PG1hdC1sYWJlbD57eyAnUFJFSk9JTi5OSUNLTkFNRScgfCB0cmFuc2xhdGUgfX08L21hdC1sYWJlbD5cblx0XHQ8aW5wdXRcblx0XHRcdG1hdElucHV0XG5cdFx0XHR0eXBlPVwidGV4dFwiXG5cdFx0XHRtYXhsZW5ndGg9XCIyMFwiXG5cdFx0XHRbKG5nTW9kZWwpXT1cIm5pY2tuYW1lXCJcblx0XHRcdChjaGFuZ2UpPVwidXBkYXRlTmlja25hbWUoKVwiXG5cdFx0XHRhdXRvY29tcGxldGU9XCJvZmZcIlxuXHRcdC8+XG5cdDwvbWF0LWZvcm0tZmllbGQ+XG48L2Rpdj4iXX0=