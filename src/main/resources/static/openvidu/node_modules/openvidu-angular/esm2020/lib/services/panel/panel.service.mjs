import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { PanelType } from '../../models/panel.model';
import * as i0 from "@angular/core";
import * as i1 from "../logger/logger.service";
export class PanelService {
    /**
     * @internal
     */
    constructor(loggerSrv) {
        this.loggerSrv = loggerSrv;
        this.isExternalOpened = false;
        this._panelOpened = new BehaviorSubject({ opened: false });
        this.panelMap = new Map();
        this.log = this.loggerSrv.get('PanelService');
        this.panelOpenedObs = this._panelOpened.asObservable();
        Object.values(PanelType).forEach((panel) => this.panelMap.set(panel, false));
    }
    /**
     * Open or close the panel type received. Calling this method with the panel opened and the same type panel, will close the panel.
     * If the type is differente, it will switch to the properly panel.
     */
    togglePanel(type, expand) {
        let nextOpenedValue = false;
        if (this.panelMap.has(type)) {
            this.log.d(`Toggling ${type} menu`);
            this.panelMap.forEach((opened, panel) => {
                if (panel === type) {
                    // Toggle panel
                    this.panelMap.set(panel, !opened);
                    nextOpenedValue = !opened;
                }
                else {
                    // Close others
                    this.panelMap.set(panel, false);
                }
            });
        }
        else {
            // Panel is external
            this.log.d('Toggling external panel');
            // Close all panels
            this.panelMap.forEach((_, panel) => this.panelMap.set(panel, false));
            // Opening when external panel is closed or is opened with another type
            this.isExternalOpened = !this.isExternalOpened || this.externalType !== type;
            this.externalType = !this.isExternalOpened ? '' : type;
            nextOpenedValue = this.isExternalOpened;
        }
        const oldType = this._panelOpened.getValue().type;
        this._panelOpened.next({ opened: nextOpenedValue, type, expand, oldType });
    }
    /**
     * @internal
     */
    isPanelOpened() {
        const anyOpened = Array.from(this.panelMap.values()).some((opened) => opened);
        return anyOpened || this.isExternalPanelOpened();
    }
    /**
     * Closes the panel (if opened)
     */
    closePanel() {
        this.panelMap.forEach((_, panel) => this.panelMap.set(panel, false));
        this._panelOpened.next({ opened: false });
    }
    /**
     * Whether the chat panel is opened or not.
     */
    isChatPanelOpened() {
        return !!this.panelMap.get(PanelType.CHAT);
    }
    /**
     * Whether the participants panel is opened or not.
     */
    isParticipantsPanelOpened() {
        return !!this.panelMap.get(PanelType.PARTICIPANTS);
    }
    /**
     * Whether the activities panel is opened or not.
     */
    isActivitiesPanelOpened() {
        return !!this.panelMap.get(PanelType.ACTIVITIES);
    }
    /**
     * Whether the settings panel is opened or not.
     */
    isSettingsPanelOpened() {
        return !!this.panelMap.get(PanelType.SETTINGS);
    }
    /**
     * Whether the background effects panel is opened or not.
     */
    isBackgroundEffectsPanelOpened() {
        return !!this.panelMap.get(PanelType.BACKGROUND_EFFECTS);
    }
    isExternalPanelOpened() {
        return this.isExternalOpened;
    }
}
PanelService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.8", ngImport: i0, type: PanelService, deps: [{ token: i1.LoggerService }], target: i0.ɵɵFactoryTarget.Injectable });
PanelService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "14.2.8", ngImport: i0, type: PanelService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.8", ngImport: i0, type: PanelService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i1.LoggerService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFuZWwuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL29wZW52aWR1LWFuZ3VsYXIvc3JjL2xpYi9zZXJ2aWNlcy9wYW5lbC9wYW5lbC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDM0MsT0FBTyxFQUFFLGVBQWUsRUFBYyxNQUFNLE1BQU0sQ0FBQztBQUVuRCxPQUFPLEVBQXdCLFNBQVMsRUFBRSxNQUFNLDBCQUEwQixDQUFDOzs7QUFhM0UsTUFBTSxPQUFPLFlBQVk7SUFXeEI7O09BRUc7SUFDSCxZQUFzQixTQUF3QjtRQUF4QixjQUFTLEdBQVQsU0FBUyxDQUFlO1FBUnRDLHFCQUFnQixHQUFZLEtBQUssQ0FBQztRQUVoQyxpQkFBWSxHQUFnQyxJQUFJLGVBQWUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQ3JGLGFBQVEsR0FBeUIsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQU1sRCxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQzlDLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsQ0FBQztRQUN2RCxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDOUUsQ0FBQztJQUVEOzs7T0FHRztJQUNILFdBQVcsQ0FBQyxJQUF3QixFQUFFLE1BQXNDO1FBQzNFLElBQUksZUFBZSxHQUFZLEtBQUssQ0FBQztRQUNyQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsR0FB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RCxDQUFDO0lBRUQ7O09BRUc7SUFDSCxxQkFBcUI7UUFDcEIsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFRDs7T0FFRztJQUNILDhCQUE4QjtRQUM3QixPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQscUJBQXFCO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDO0lBQzlCLENBQUM7O3lHQTNHVyxZQUFZOzZHQUFaLFlBQVksY0FGWixNQUFNOzJGQUVOLFlBQVk7a0JBSHhCLFVBQVU7bUJBQUM7b0JBQ1gsVUFBVSxFQUFFLE1BQU07aUJBQ2xCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmVoYXZpb3JTdWJqZWN0LCBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBJTG9nZ2VyIH0gZnJvbSAnLi4vLi4vbW9kZWxzL2xvZ2dlci5tb2RlbCc7XG5pbXBvcnQgeyBQYW5lbFNldHRpbmdzT3B0aW9ucywgUGFuZWxUeXBlIH0gZnJvbSAnLi4vLi4vbW9kZWxzL3BhbmVsLm1vZGVsJztcbmltcG9ydCB7IExvZ2dlclNlcnZpY2UgfSBmcm9tICcuLi9sb2dnZXIvbG9nZ2VyLnNlcnZpY2UnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBhbmVsRXZlbnQge1xuXHRvcGVuZWQ6IGJvb2xlYW47XG5cdHR5cGU/OiBQYW5lbFR5cGUgfCBzdHJpbmc7XG5cdGV4cGFuZD86IHN0cmluZztcblx0b2xkVHlwZT86IFBhbmVsVHlwZSB8IHN0cmluZztcbn1cblxuQEluamVjdGFibGUoe1xuXHRwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgUGFuZWxTZXJ2aWNlIHtcblx0LyoqXG5cdCAqIFBhbmVsIE9ic2VydmFibGUgd2hpY2ggcHVzaGVzIHRoZSBwYW5lbCBzdGF0dXMgaW4gZXZlcnkgdXBkYXRlLlxuXHQgKi9cblx0cGFuZWxPcGVuZWRPYnM6IE9ic2VydmFibGU8UGFuZWxFdmVudD47XG5cdHByb3RlY3RlZCBsb2c6IElMb2dnZXI7XG5cdHByaXZhdGUgaXNFeHRlcm5hbE9wZW5lZDogYm9vbGVhbiA9IGZhbHNlO1xuXHRwcml2YXRlIGV4dGVybmFsVHlwZTogc3RyaW5nO1xuXHRwcm90ZWN0ZWQgX3BhbmVsT3BlbmVkID0gPEJlaGF2aW9yU3ViamVjdDxQYW5lbEV2ZW50Pj5uZXcgQmVoYXZpb3JTdWJqZWN0KHsgb3BlbmVkOiBmYWxzZSB9KTtcblx0cHJpdmF0ZSBwYW5lbE1hcDogTWFwPHN0cmluZywgYm9vbGVhbj4gPSBuZXcgTWFwKCk7XG5cblx0LyoqXG5cdCAqIEBpbnRlcm5hbFxuXHQgKi9cblx0Y29uc3RydWN0b3IocHJvdGVjdGVkIGxvZ2dlclNydjogTG9nZ2VyU2VydmljZSkge1xuXHRcdHRoaXMubG9nID0gdGhpcy5sb2dnZXJTcnYuZ2V0KCdQYW5lbFNlcnZpY2UnKTtcblx0XHR0aGlzLnBhbmVsT3BlbmVkT2JzID0gdGhpcy5fcGFuZWxPcGVuZWQuYXNPYnNlcnZhYmxlKCk7XG5cdFx0T2JqZWN0LnZhbHVlcyhQYW5lbFR5cGUpLmZvckVhY2goKHBhbmVsKSA9PiB0aGlzLnBhbmVsTWFwLnNldChwYW5lbCwgZmFsc2UpKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBPcGVuIG9yIGNsb3NlIHRoZSBwYW5lbCB0eXBlIHJlY2VpdmVkLiBDYWxsaW5nIHRoaXMgbWV0aG9kIHdpdGggdGhlIHBhbmVsIG9wZW5lZCBhbmQgdGhlIHNhbWUgdHlwZSBwYW5lbCwgd2lsbCBjbG9zZSB0aGUgcGFuZWwuXG5cdCAqIElmIHRoZSB0eXBlIGlzIGRpZmZlcmVudGUsIGl0IHdpbGwgc3dpdGNoIHRvIHRoZSBwcm9wZXJseSBwYW5lbC5cblx0ICovXG5cdHRvZ2dsZVBhbmVsKHR5cGU6IFBhbmVsVHlwZSB8IHN0cmluZywgZXhwYW5kPzogUGFuZWxTZXR0aW5nc09wdGlvbnMgfCBzdHJpbmcpIHtcblx0XHRsZXQgbmV4dE9wZW5lZFZhbHVlOiBib29sZWFuID0gZmFsc2U7XG5cdFx0aWYgKHRoaXMucGFuZWxNYXAuaGFzKHR5cGUpKSB7XG5cdFx0XHR0aGlzLmxvZy5kKGBUb2dnbGluZyAke3R5cGV9IG1lbnVgKTtcblxuXHRcdFx0dGhpcy5wYW5lbE1hcC5mb3JFYWNoKChvcGVuZWQ6IGJvb2xlYW4sIHBhbmVsOiBzdHJpbmcpID0+IHtcblx0XHRcdFx0aWYgKHBhbmVsID09PSB0eXBlKSB7XG5cdFx0XHRcdFx0Ly8gVG9nZ2xlIHBhbmVsXG5cdFx0XHRcdFx0dGhpcy5wYW5lbE1hcC5zZXQocGFuZWwsICFvcGVuZWQpO1xuXHRcdFx0XHRcdG5leHRPcGVuZWRWYWx1ZSA9ICFvcGVuZWQ7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ2xvc2Ugb3RoZXJzXG5cdFx0XHRcdFx0dGhpcy5wYW5lbE1hcC5zZXQocGFuZWwsIGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFBhbmVsIGlzIGV4dGVybmFsXG5cdFx0XHR0aGlzLmxvZy5kKCdUb2dnbGluZyBleHRlcm5hbCBwYW5lbCcpO1xuXHRcdFx0Ly8gQ2xvc2UgYWxsIHBhbmVsc1xuXHRcdFx0dGhpcy5wYW5lbE1hcC5mb3JFYWNoKChfLCBwYW5lbDogc3RyaW5nKSA9PiB0aGlzLnBhbmVsTWFwLnNldChwYW5lbCwgZmFsc2UpKTtcblx0XHRcdC8vIE9wZW5pbmcgd2hlbiBleHRlcm5hbCBwYW5lbCBpcyBjbG9zZWQgb3IgaXMgb3BlbmVkIHdpdGggYW5vdGhlciB0eXBlXG5cdFx0XHR0aGlzLmlzRXh0ZXJuYWxPcGVuZWQgPSAhdGhpcy5pc0V4dGVybmFsT3BlbmVkIHx8IHRoaXMuZXh0ZXJuYWxUeXBlICE9PSB0eXBlO1xuXHRcdFx0dGhpcy5leHRlcm5hbFR5cGUgPSAhdGhpcy5pc0V4dGVybmFsT3BlbmVkID8gJycgOiB0eXBlO1xuXHRcdFx0bmV4dE9wZW5lZFZhbHVlID0gdGhpcy5pc0V4dGVybmFsT3BlbmVkO1xuXHRcdH1cblxuXHRcdGNvbnN0IG9sZFR5cGUgPSB0aGlzLl9wYW5lbE9wZW5lZC5nZXRWYWx1ZSgpLnR5cGU7XG5cdFx0dGhpcy5fcGFuZWxPcGVuZWQubmV4dCh7IG9wZW5lZDogbmV4dE9wZW5lZFZhbHVlLCB0eXBlLCBleHBhbmQsIG9sZFR5cGUgfSk7XG5cdH1cblxuXHQvKipcblx0ICogQGludGVybmFsXG5cdCAqL1xuXHRpc1BhbmVsT3BlbmVkKCk6IGJvb2xlYW4ge1xuXHRcdGNvbnN0IGFueU9wZW5lZCA9IEFycmF5LmZyb20odGhpcy5wYW5lbE1hcC52YWx1ZXMoKSkuc29tZSgob3BlbmVkKSA9PiBvcGVuZWQpO1xuXHRcdHJldHVybiBhbnlPcGVuZWQgfHwgdGhpcy5pc0V4dGVybmFsUGFuZWxPcGVuZWQoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9zZXMgdGhlIHBhbmVsIChpZiBvcGVuZWQpXG5cdCAqL1xuXHRjbG9zZVBhbmVsKCk6IHZvaWQge1xuXHRcdHRoaXMucGFuZWxNYXAuZm9yRWFjaCgoXywgcGFuZWw6IHN0cmluZykgPT4gdGhpcy5wYW5lbE1hcC5zZXQocGFuZWwsIGZhbHNlKSk7XG5cdFx0dGhpcy5fcGFuZWxPcGVuZWQubmV4dCh7IG9wZW5lZDogZmFsc2UgfSk7XG5cdH1cblxuXHQvKipcblx0ICogV2hldGhlciB0aGUgY2hhdCBwYW5lbCBpcyBvcGVuZWQgb3Igbm90LlxuXHQgKi9cblx0aXNDaGF0UGFuZWxPcGVuZWQoKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuICEhdGhpcy5wYW5lbE1hcC5nZXQoUGFuZWxUeXBlLkNIQVQpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFdoZXRoZXIgdGhlIHBhcnRpY2lwYW50cyBwYW5lbCBpcyBvcGVuZWQgb3Igbm90LlxuXHQgKi9cblx0aXNQYXJ0aWNpcGFudHNQYW5lbE9wZW5lZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gISF0aGlzLnBhbmVsTWFwLmdldChQYW5lbFR5cGUuUEFSVElDSVBBTlRTKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBXaGV0aGVyIHRoZSBhY3Rpdml0aWVzIHBhbmVsIGlzIG9wZW5lZCBvciBub3QuXG5cdCAqL1xuXHRpc0FjdGl2aXRpZXNQYW5lbE9wZW5lZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gISF0aGlzLnBhbmVsTWFwLmdldChQYW5lbFR5cGUuQUNUSVZJVElFUyk7XG5cdH1cblxuXHQvKipcblx0ICogV2hldGhlciB0aGUgc2V0dGluZ3MgcGFuZWwgaXMgb3BlbmVkIG9yIG5vdC5cblx0ICovXG5cdGlzU2V0dGluZ3NQYW5lbE9wZW5lZCgpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gISF0aGlzLnBhbmVsTWFwLmdldChQYW5lbFR5cGUuU0VUVElOR1MpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFdoZXRoZXIgdGhlIGJhY2tncm91bmQgZWZmZWN0cyBwYW5lbCBpcyBvcGVuZWQgb3Igbm90LlxuXHQgKi9cblx0aXNCYWNrZ3JvdW5kRWZmZWN0c1BhbmVsT3BlbmVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiAhIXRoaXMucGFuZWxNYXAuZ2V0KFBhbmVsVHlwZS5CQUNLR1JPVU5EX0VGRkVDVFMpO1xuXHR9XG5cblx0aXNFeHRlcm5hbFBhbmVsT3BlbmVkKCk6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmlzRXh0ZXJuYWxPcGVuZWQ7XG5cdH1cbn1cbiJdfQ==